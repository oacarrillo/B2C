<!DOCTYPE HTML>
<head>
<title>KALLSONYSÂ´S - CONTACTO</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link href="css/style.css" rel="stylesheet" type="text/css" media="all"/>
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script> 
<script type="text/javascript" src="js/move-top.js"></script>
<script type="text/javascript" src="js/easing.js"></script>
</head>
<body>
	Hola

	<script>
	
	//crear cliente http://35.184.218.7:8080/SERVICES_OMS/clienteService/clientesC 		post
	var text3 ='{' +
	'"nombre": "pepito",' +
	'"apellido": "perez",' +
	'"documento": "325435",'+
    '"telefono": "547457",'+
    '"celular": "31122445",'+
    '"tipoDocumento": "CEDULA_EXTRANJERIA",'+
    '"tipoCliente": "PLATINO",'+
    '"direccion": "cr4545",'+
    '"correo": "pepito@javeriana.edu.co",'+
    '"estado": "ACTIVO",'+
    '"ciudad": {"ciudadId": 1,"ciudadNombre": "BOGOTA","paisId": 1},'+
    '"pais": {"paisId": 1,"paisNombre": "COLOMBIA"},'+
    '"tarjeta":{"numero": 565657,"ano": 2017,"mes": 9,"franquicia": "visa","nombre": "pepito","codigo": 2345},'+
	'"login":{"username": "pepito123","password": 123456,"tipoUsuario": 1,"ownerid": "Cliente"}'+
	'}';


	//http://35.184.218.7:8080/SERVICES_OMS/ordenService/ordenC 	post  - crear orden
	var text2 = '{' +
	'"token":"8xZ+J8awrx4=",' +
	'"ordenCiudad":{"ciudadId":1},' +
	'"ordenPais":{"paisId":1},'+
	'"ordenDireccionEntrega":{"direccionDescripcion":"Calle 33"},' +
	'"ordenDetalles":[{"detOrdenProductoId":1,"detOrdenValorUnitario":51500,"detOrdenCantidad":6},' +
	'{"detOrdenProductoId":2,"detOrdenValorUnitario":105000,"detOrdenCantidad":2}],'+
	'"tarjetaCredito":{"numero":11229900,"ano":2017,"mes":12,"franquicia":"VISA","nombre":"ANDRES LOPEZ","codigo":123}'+
	'}';


	//logeo
	//http://35.184.218.7:8080//SERVICES_OMS/loginService/validarLogin
	var text = '{' +
	'"username": "oscarcarrillo","password": 123456'+
	'}';


	//REspuesta valida login
    var text1='{'+
      '"id": 0,'+
      '"password": "LvxBN5EW7bg=",'+  
      '"idUsuario": null,'+
      '"tipoUsuario": null,'+  
      '"estado": null,'+
      '"username": "oscarcarrillo",'+
      '"ownerid": null,'+
      '"token": "S8zCNuZWKTc="'+
    '}';

	//obj = JSON.parse(text2);
	//alert(text2);
	//console.log(obj);




// al crear el usuario la direccion es obligatoria
// al crear el suaurio elimino la seccion de tajeta si no se envia
// si no hay tarjeta no envio tag
//si le da a direccion registrada, no envio tag. cuando id direccion es cero, envio direccion

/*


Json de ValidaLogin
- Falta saber si el usuario tiene tarjeta de credito registrada
- No se necesita el password cifrado

*/


// crear orden
/*
var test="8xZ+J8awrx4=";

var data = JSON.stringify({
  "token": ""+test+"",
  "ordenCiudad": {
    "ciudadId": 1
  },
  "ordenPais": {
    "paisId": 1
  },
  "ordenDireccionEntrega": {
    "direccionId": 0,
    "direccionDescripcion": "Calle 33"
  },
  "ordenDetalles": [
    {
      "detOrdenProductoId": 1,
      "detOrdenValorUnitario": 51500,
      "detOrdenCantidad": 6
    },
    {
      "detOrdenProductoId": 2,
      "detOrdenValorUnitario": 105000,
      "detOrdenCantidad": 2
    }
  ],
  "tarjetaCredito": {
    "numero": 11229900,
    "ano": 2017,
    "mes": 12,
    "franquicia": "VISA",
    "nombre": "ANDRES LOPEZ",
    "codigo": 123
  }
});

var xhr = new XMLHttpRequest();
xhr.withCredentials = true;

xhr.addEventListener("readystatechange", function () {
  if (this.readyState === 4) {
    console.log(this.responseText);
  }
});

xhr.open("POST", "http://35.184.218.7:8080/SERVICES_OMS/ordenService/ordenC");
xhr.setRequestHeader("content-type", "application/json");
xhr.setRequestHeader("cache-control", "no-cache");
xhr.send(data);

*/
var user="oscarcarrillo";
var pass=123456;

var data = JSON.stringify({"username":""+user+"","password":pass});
var xhr = new XMLHttpRequest();
xhr.withCredentials = true;
xhr.addEventListener("readystatechange", function () {
  if (this.readyState === 4) {
    console.log(this.responseText);
  }
});
xhr.open("POST", "http://35.184.218.7:8080/SERVICES_OMS/loginService/validarLogin");
xhr.setRequestHeader("content-type", "application/json");
xhr.setRequestHeader("cache-control", "no-cache");
xhr.send(data);


	</script>
</body>
</html>

